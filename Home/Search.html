<html>
  <head>
    <meta charset="UTF-8">
    <title>左検索部</title>
    <link rel="stylesheet" type="text/css" href="Search.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.6.3/css/all.css" integrity="sha384-UHRtZLI+pbxtHCWp1t77Bi1L4ZtiqrqD80Kn4Z8NTSRyMA2Fd33n5dQ8lWUE00s/" crossorigin="anonymous">
  <head>
    
    <body>
      <!--アコーディオンの作成-->
      <form action="cgi-bin/example.cgi" method="post" style="margin-bottom:50px;">
	<div class="accbox">
	  <!--ラベル１の開始-->
	  <input type="checkbox" id="mday" class="cssacc" />
	  <label for="mday">出会った日</label>
	  <div class="accshow">
	    <!--ここに隱す中身-->
	    <form action="./" method="post" name="met" id="met">
	      <table>
		<p>
		  <select id="metyear_under"><option value="0">----</option></select>年
		  <select id="metmonth_under"><option value="0">--</option></select>月
		  <select id="metday_under"><option value="0">--</option></select>日~
		  <br>
		  <!--年月日をfor文で回す-->
		  <script type="text/javascript">
		    var time = new Date();
		    var year = time.getFullYear();
		    for (var i = year; i >= 1900; i--) {
			createOptionElements(i,'metyear_under');
		    }
		    for (var i = 1; i <= 12; i++) {
			createOptionElements(i,'metmonth_under');
		    }
		    for (var i = 1; i <= 31; i++) {
			createOptionElements(i,'metday_under');
		    }
		    
		    function createOptionElements(num,parentId){
			var doc = document.createElement('option');
			doc.value = doc.innerHTML = num;
			document.getElementById(parentId).appendChild(doc);
		    }
		    //ここから閏年や30日の判定JS
		    window.addEventListener('DOMContentLoaded', function(e){
			[].forEach.call(document.querySelectorAll('#metyear_under,#metmonth_under'),function(x){
			    x.addEventListener('change',function(e){
				var myu=document.querySelector('#metyear_under').value;
				var mmu=document.querySelector('#metmonth_under').value;
				if(myu==="" || mmu===""){
				    document.querySelector('#metday_under').selectedIndex=0;
				    document.querySelector('#metday_under').disabled=true;
				}else{
				    var dd=new Date(myu+"-"+mmu+"-1");
				    dd.setMonth(dd.getMonth()+1);
				    dd.setDate(0);
				    [].forEach.call(document.querySelector('#metday_under').options,function(x){
					var flg=x.value!=="" && x.value>dd.getDate();
					x.style.display=flg?"none":"";
				    });
				    if(document.querySelector('#metday_under').value>dd.getDate()){
					document.querySelector('#metday_under option[value="'+dd.getDate()+'"]').selected=true;
				    }
				    document.querySelector('#metday_under').disabled=false;
				}
			    });
			});
		    });
		  </script>
		  <select id="metyear"><option value="0">----</option></select>年
		  <select id="metmonth"><option value="0">--</option></select>月
		  <select id="metday"><option value="0">--</option></select>日
		  <script type="text/javascript">
		    var time = new Date();
		    var year = time.getFullYear();
		    for (var i = year; i >= 1900; i--) {
			createOptionElements(i,'metyear');
		    }
		    for (var i = 1; i <= 12; i++) {
			createOptionElements(i,'metmonth');
		    }
		    for (var i = 1; i <= 31; i++) {
			createOptionElements(i,'metday');
		    }
		    
		    function createOptionElements(num,parentId){
			var doc = document.createElement('option');
			doc.value = doc.innerHTML = num;
			document.getElementById(parentId).appendChild(doc);
		    }
		    window.addEventListener('DOMContentLoaded', function(e){
			[].forEach.call(document.querySelectorAll('#metyear,#metmonth'),function(x){
			    x.addEventListener('change',function(e){
				var my=document.querySelector('#metyear').value;
				var mm=document.querySelector('#metmonth').value;
				if(my==="" || mm===""){
				    document.querySelector('#metday').selectedIndex=0;
				    document.querySelector('#metday').disabled=true;
				}else{
				    var dd=new Date(my+"-"+mm+"-1");
				    dd.setMonth(dd.getMonth()+1);
				    dd.setDate(0);
				    [].forEach.call(document.querySelector('#metday').options,function(x){
					var flg=x.value!=="" && x.value>dd.getDate();
					x.style.display=flg?"none":"";
				    });
				    if(document.querySelector('#metday').value>dd.getDate()){
					document.querySelector('#metday option[value="'+dd.getDate()+'"]').selected=true;
				    }
				    document.querySelector('#metday').disabled=false;
				}
			    });
			});
		    });
		  </script>
		</p>
	      </table>
	    </form>
	  </div>
	  <!--ラベル１の終了-->
	  <!--ラベル２の開始-->
	  <input type="checkbox" id="age" class="cssacc" />
	  <label for="age">年齢　　　</label>
	  <div class="accshow">
	    <!--ここに隱す中身-->
	    <p>
	      <input type="number" id="age_under" min="0" max="150" style="width:50px">歳〜
	      <input type="number" id="age_over" min="0" max="150" style="width:50px">歳
	    </p>
	  </div>
	  <!--ラベル2の終了-->
	  <!--ラベル3の開始-->
	  <input type="checkbox" id="bday" class="cssacc" />
	  <label for="bday">生年月日　</label>
	  <div class="accshow">
	    <!--ここに隱す中身-->
	    <form action="./" method="post" name="birth" id="birth">
	      <table>
		<p>
		  <select id="birthyear_under"><option value="0">----</option></select>年
		  <select id="birthmonth_under"><option value="0">--</option></select>月
		  <select id="birthday_under"><option value="0">--</option></select>日~
		  <script type="text/javascript">
		    var time = new Date();
		    var year = time.getFullYear();
		    for (var i = year; i >= 1900; i--) {
			createOptionElements(i,'birthyear_under');
		    }
		    for (var i = 1; i <= 12; i++) {
			createOptionElements(i,'birthmonth_under');
		    }
		    for (var i = 1; i <= 31; i++) {
			createOptionElements(i,'birthday_under');
		    }
		    function createOptionElements(num,parentId){
			var doc = document.createElement('option');
			doc.value = doc.innerHTML = num;
			document.getElementById(parentId).appendChild(doc);
		    }
		    window.addEventListener('DOMContentLoaded', function(e){
			[].forEach.call(document.querySelectorAll('#birthyear_under,#birthmonth_under'),function(x){
			    x.addEventListener('change',function(e){
				var byu=document.querySelector('#birthyear_under').value;
				var bmu=document.querySelector('#birthmonth_under').value;
				if(byu==="" || bmu===""){
				    document.querySelector('#birthday_under').selectedIndex=0;
				    document.querySelector('#birthday_under').disabled=true;
				}else{
				    var dd=new Date(byu+"-"+bmu+"-1");
				    dd.setMonth(dd.getMonth()+1);
				    dd.setDate(0);
				    [].forEach.call(document.querySelector('#birthday_under').options,function(x){
					var flg=x.value!=="" && x.value>dd.getDate();
					x.style.display=flg?"none":"";
				    });
				    if(document.querySelector('#birthday_under').value>dd.getDate()){
					document.querySelector('#birthday_under option[value="'+dd.getDate()+'"]').selected=true;
				    }
				    document.querySelector('#birthday_under').disabled=false;
				}
			    });
			});
		    });
		  </script>
		  <br>
		  <select id="birthyear"><option value="0">----</option></select>年
		  <select id="birthmonth"><option value="0">--</option></select>月
		  <select id="birthday"><option value="0">--</option></select>日
		  <script type="text/javascript">
		    var time = new Date();
		    var year = time.getFullYear();
		    for (var i = year; i >= 1900; i--) {
			createOptionElements(i,'birthyear');
		    }
		    for (var i = 1; i <= 12; i++) {
			createOptionElements(i,'birthmonth');
		    }
		    for (var i = 1; i <= 31; i++) {
			createOptionElements(i,'birthday');
		    }
		    function createOptionElements(num,parentId){
			var doc = document.createElement('option');
			doc.value = doc.innerHTML = num;
			document.getElementById(parentId).appendChild(doc);
		    }
		    window.addEventListener('DOMContentLoaded', function(e){
			[].forEach.call(document.querySelectorAll('#birthyear,#birthmonth'),function(x){
			    x.addEventListener('change',function(e){
				var by=document.querySelector('#birthyear').value;
				var bm=document.querySelector('#birthmonth').value;
				if(by==="" || bm===""){
				    document.querySelector('#birthday').selectedIndex=0;
				    document.querySelector('#birthday').disabled=true;
				}else{
				    var dd=new Date(by+"-"+bm+"-1");
				    dd.setMonth(dd.getMonth()+1);
				    dd.setDate(0);
				    [].forEach.call(document.querySelector('#birthday').options,function(x){
					var flg=x.value!=="" && x.value>dd.getDate();
					x.style.display=flg?"none":"";
				    });
				    if(document.querySelector('#birthday').value>dd.getDate()){
					document.querySelector('#birthday option[value="'+dd.getDate()+'"]').selected=true;
				    }
				    document.querySelector('#birthday').disabled=false;
				}
			    });
			});
		    });
		  </script>
		</p>
	      </table>
	    </form>
	  </div>
	  <!--ラベル3の終了-->
	  <!--ラベル4の開始-->
	  <input type="checkbox" id="blood" class="cssacc" />
	  <label for="blood">血液型　　</label>
	  <div class="accshow">
	    <!--ここに隱す中身-->
	    <p>
	      <input type="checkbox" id="A" name="A">A型
	      <input type="checkbox" id="B" name="B">B型
	      <input type="checkbox" id="O" name="O">O型
	      <input type="checkbox" id="AB" name="AB">AB型
	    </p>
	  </div>
	  <!--ラベル4の終了-->
	</div>
      </form>
      <div class="search">
	<a id="lsearch" href="Main.html" target="frame3">検索
	</a>
      </div>
    </body>
</html>
